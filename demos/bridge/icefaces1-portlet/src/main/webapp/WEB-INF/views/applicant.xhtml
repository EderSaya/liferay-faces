<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:aui="http://liferay.com/faces/aui"
	xmlns:alloy="http://liferay.com/faces/alloy"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:example-cc="http://liferay.com/faces/composite/example-cc"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<example-cc:clipboard label="#{i18n['job-application']}" />
	<example-cc:sponsorButton />
	<example-cc:divider />
	<alloy:row>
		<alloy:column id="c1" width="66">
			<ice:form id="f1" partialSubmit="true">
				<ice:messages globalOnly="true" layout="table" />
				<aui:fieldset id="fs1">
					<alloy:row>
						<alloy:column id="c1a" width="50">
							<aui:field label="#{i18n['first-name']}">
								<ice:inputText id="firstName" required="true"
									value="#{applicantModelBean.firstName}" />
								<ice:message for="firstName" />
							</aui:field>
							<aui:field label="#{i18n['last-name']}">
								<ice:inputText id="lastName" required="true"
									value="#{applicantModelBean.lastName}" />
								<ice:message for="lastName" />
							</aui:field>
							<aui:field label="#{i18n['email-address']}">
								<ice:inputText id="emailAddress" required="true"
									validatorMessage="#{i18n['invalid-email-address']}"
									value="#{applicantModelBean.emailAddress}" />
								<ice:message for="emailAddress" />
							</aui:field>
							<aui:field label="#{i18n['phone-number']}">
								<ice:inputText id="phoneNumber" required="true"
									value="#{applicantModelBean.phoneNumber}" />
								<ice:message for="phoneNumber" />
							</aui:field>
						</alloy:column>
						<alloy:column id="c1b" width="50">
							<aui:field label="#{i18n['birthday']}">
								<ice:selectInputDate id="dateOfBirth" renderAsPopup="true"
									required="true" value="#{applicantModelBean.dateOfBirth}">
									<f:convertDateTime
										pattern="#{portletPreferencesValues['datePattern'][0]}" />
								</ice:selectInputDate>
								<ice:message for="dateOfBirth" />
							</aui:field>
							<aui:field label="#{i18n['city']}">
								<ice:inputText id="city" required="true"
									value="#{applicantModelBean.city}" />
								<ui:remove>
									<ice:selectInputText id="city" immediate="true" listVar="city"
										listValue="#{listModelBean.filteredCities}" required="true"
										value="#{applicantModelBean.city}"
										valueChangeListener="#{applicantBackingBean.cityListener}">
										<f:facet name="selectInputText">
											<ice:panelGrid columns="2">
												<ice:outputText id="autoCompleteCity"
													value="#{city.cityName}" />
												<ice:outputText id="autoCompletePostalCode"
													value="#{city.postalCode}" />
											</ice:panelGrid>
										</f:facet>
									</ice:selectInputText>
								</ui:remove>
								<ice:message id="cityMessage" for="city" />
							</aui:field>
							<aui:field label="#{i18n['state-province']}">
								<ice:selectOneMenu id="provinceId" required="true"
									value="#{applicantModelBean.provinceId}">
									<f:selectItem itemLabel="#{i18n['select']}" itemValue="" />
									<f:selectItems itemValue="#{province.provinceId}"
										itemLabel="#{province.provinceName}"
										value="#{listModelBean.provinceSelectItems}" var="province" />
								</ice:selectOneMenu>
								<ice:message id="provinceIdMessage" for="provinceId" />
							</aui:field>
							<aui:field label="#{i18n['zip-postal']}">
								<ice:inputText id="postalCode" required="true"
									value="#{applicantModelBean.postalCode}"
									valueChangeListener="#{applicantBackingBean.postalCodeListener}" />
								<ice:graphicImage value="/images/icon-help.png"
									title="#{i18n['postal-code-hint']}" />
								<ice:message id="postalCodeMessage" for="postalCode" />
							</aui:field>
						</alloy:column>
					</alloy:row>
				</aui:fieldset>
				<aui:fieldset>
					<alloy:row>
						<alloy:column>
							<aui:field id="commentsField" label="#{i18n['comments']}">
								<ice:panelGroup id="showHide" layout="block">
									<ice:commandLink
										actionListener="#{applicantViewBean.toggleComments}"
										immediate="true"
										rendered="#{!applicantViewBean.commentsRendered}"
										value="#{i18n['show']} #{i18n['comments']}" />
									<ice:commandLink
										actionListener="#{applicantViewBean.toggleComments}"
										immediate="true"
										rendered="#{applicantViewBean.commentsRendered}"
										value="#{i18n['hide']} #{i18n['comments']}" />
								</ice:panelGroup>
								<ice:inputTextarea id="comments" cols="50" rows="10"
									rendered="#{applicantViewBean.commentsRendered}"
									value="#{applicantModelBean.comments}" />
							</aui:field>
						</alloy:column>
					</alloy:row>
				</aui:fieldset>
				<hr />
				<ice:commandButton action="#{applicantBackingBean.submit}"
					partialSubmit="false" value="#{i18n['submit']}" />
			</ice:form>
		</alloy:column>
		<alloy:column id="c2" width="33">
			<ice:form id="f2">
				<ice:panelPopup visible="#{applicantViewBean.popupRendered}"
					rendered="#{applicantViewBean.popupRendered}" modal="true">
					<f:facet name="header">
						<ice:outputText value="#{i18n['confirmation']}" />
					</f:facet>
					<f:facet name="body">
						<ice:panelGroup>
							<ice:outputText
								value="#{i18n['are-you-sure-you-want-to-delete-this']}" />
							<hr />
							<ice:commandButton
								actionListener="#{applicantBackingBean.deleteUploadedFile}"
								value="#{i18n['yes']}" />
							<ice:commandButton
								actionListener="#{applicantViewBean.togglePopup}"
								value="#{i18n['no']}" />
						</ice:panelGroup>
					</f:facet>
				</ice:panelPopup>
				<alloy:column id="c2a" styleClass="uploaded-files">
					<h3>#{i18n['attachments']}</h3>
					<ice:dataTable headerClass="portlet-section-header results-header"
						rowClasses="portlet-section-body results-row, portlet-section-alternate results-row alt"
						value="#{applicantModelBean.uploadedFiles}" var="uploadedFile">
						<ice:column>
							<ice:commandButton
								actionListener="#{applicantViewBean.togglePopup}"
								image="/images/icon-delete.png">
								<f:setPropertyActionListener value="#{uploadedFile.id}"
									target="#{applicantViewBean.uploadedFileId}" />
							</ice:commandButton>
						</ice:column>
						<ice:column>
							<f:facet name="header">
								<ice:outputText value="#{i18n['file-name']}" />
							</f:facet>
							<ice:outputText value="#{uploadedFile.name}" />
						</ice:column>
						<ice:column>
							<f:facet name="header">
								<ice:outputText value="#{i18n['size']}" />
							</f:facet>
							<ice:outputText value="#{uploadedFile.size}" />
						</ice:column>
					</ice:dataTable>
					<ice:inputFile id="fileEntryComp"
						actionListener="#{applicantBackingBean.fileUploadActionListener}"
						progressListener="#{applicantViewBean.fileUploadProgressListener}" uniqueFolder="true"
						uploadDirectory="#{applicantBackingBean.fileUploadAbsolutePath}" uploadDirectoryAbsolute="true" />
					<ice:outputProgress value="#{applicantViewBean.percentComplete}"
						labelComplete="0%" />
				</alloy:column>
			</ice:form>
		</alloy:column>
	</alloy:row>

</ui:composition>
